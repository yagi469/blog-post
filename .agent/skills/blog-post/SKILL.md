---
name: blog-post
description: Google DriveのドキュメントやPDFを元に、はてなブログ向けのはてな記法記事を作成するスキル
---

# ブログ記事作成スキル

Google DriveのドキュメントやPDFを情報源として、はてなブログ向けの**はてな記法**記事を生成するスキルです。

## 概要

このスキルは以下のワークフローでブログ記事を作成します：

1. **ソース取得**: Google Driveからドキュメント/PDFを読み込む
2. **構成設計**: 記事の構成（アウトライン）を決定する
3. **記事生成**: はてなブログ向け**はてな記法**で記事を執筆する
4. **レビュー**: ユーザーに確認し、フィードバックを反映する
5. **保存**: ローカルプロジェクトとGoogle Driveの両方に保存する

---

## ワークフロー詳細

### Step 1: ソースの特定と取得

ユーザーに以下を確認する：

1. **Google Driveのソースファイル**を特定する
   - ファイル名やキーワードで `mcp_gdrive_gdrive_search` を使って検索する
   - または `mcp_gdrive_gdrive_list` でフォルダ内を一覧表示する
2. **ソースファイルを読み込む**
   - `mcp_gdrive_gdrive_read` でファイル内容を取得する
   - Google Docs → Markdown、Sheets → CSV、Slides → テキスト に自動変換される
   - PDFの場合は、テキスト抽出を試みる
3. **ソース内容を要約**してユーザーに提示し、記事の方向性を確認する

### Step 2: 記事の構成設計

ソース内容に基づき、以下を決定する：

1. **記事タイトル**（仮タイトル）を3つ程度提案する
2. **記事カテゴリ**を提案する
3. **ターゲット読者**を明確にする
4. **記事のアウトライン**を以下の形式で作成する：

```
* 記事アウトライン

1. 導入（リード文）
   - 読者の課題・疑問に共感する
   - この記事で得られることを明示する
2. 本文セクション1: [見出し]
   - ポイント1
   - ポイント2
3. 本文セクション2: [見出し]
   - ポイント1
   - ポイント2
4. （必要に応じて追加セクション）
5. まとめ
   - 要点の振り返り
   - 次のアクションの提案
```

5. ユーザーにアウトラインを確認してもらい、修正を反映する

### Step 3: はてなブログ向けはてな記法記事の執筆

以下のルールに従って記事を執筆する：

#### 3.1 ファイルフォーマット

記事ファイルは以下の構造で作成する（はてな記法モード）：

```
<!--
title: 記事タイトル
category: カテゴリ1, カテゴリ2
date: YYYY-MM-DD
draft: true
-->

リード文（最初の段落。記事の概要を簡潔に述べる）

[:contents]

*見出し1

本文...

*見出し2

本文...

*まとめ

本文...
```

#### 3.2 はてな記法ルール

記事は **はてな記法モード** で記述する。以下の記法を適切に使用すること：

##### 見出し

| 記法 | 対応するHTML | 説明 |
|------|-------------|------|
| `*見出し` | `<h3>` | 大見出し（記事内の最上位見出し） |
| `**見出し` | `<h4>` | 中見出し |
| `***見出し` | `<h5>` | 小見出し |

> **注意**: H1はブログタイトル、H2は記事タイトルとしてはてなブログが自動生成するため、記事本文では `*`（H3）から使用する。

##### リスト

| 記法 | 説明 | 例 |
|------|------|-----|
| `-項目` | 順序なしリスト（レベル1） | `-りんご` |
| `--項目` | 順序なしリスト（レベル2） | `--ふじ` |
| `+項目` | 順序付きリスト（レベル1） | `+手順1` |
| `++項目` | 順序付きリスト（レベル2） | `++サブ手順1` |

> **注意**: リスト記号とテキストの間にスペースを入れない。

##### 定義リスト

```
:用語1:説明1
:用語2:説明2
```

##### 引用

```
>>
引用文をここに書く
<<
```

##### コードブロック（スーパーpre記法）

言語指定なし：
```
>||
コードをここに書く
||<
```

言語指定あり（シンタックスハイライト）：
```
>|python|
print("Hello, World!")
||<
```

> 対応言語: python, javascript, typescript, ruby, go, java, bash, css, html など。  
> 対応言語の一覧: http://help.hatenablog.com/entry/markup/syntaxhighlight

##### テーブル

```
| 項目 | 値 |
| データ1 | データ2 |
```

ヘッダー付きテーブル：
```
|*項目|*値|
|データ1|データ2|
```

##### インライン記法

| 記法 | 用途 | 例 |
|------|------|-----|
| `<b>テキスト</b>` | 太字 | `<b>重要</b>` |
| `<i>テキスト</i>` | 斜体 | `<i>注意</i>` |
| `<s>テキスト</s>` | 取り消し線 | `<s>旧情報</s>` |
| `<code>コード</code>` | インラインコード | `<code>var x = 1</code>` |

##### リンク

| 記法 | 用途 | 例 |
|------|------|-----|
| `[URL:title]` | タイトル付きリンク（自動取得） | `[https://example.com:title]` |
| `[URL:title=任意のタイトル]` | タイトル指定リンク | `[https://example.com:title=Example]` |
| `[URL:embed:cite]` | ブログカード埋め込み | `[https://example.com:embed:cite]` |

##### 数式

数式の記法は `.agent/skills/blog-post/examples/quantum-field-theory.txt` を参照すること。

**インライン数式:**

文中にそのまま `[tex: ...]` を記述する。

```
ここで[tex: \varepsilon]は無限小パラメータである。
```

**ブロック数式（単一行）:**

`<div class="horizontal-scroll" align="center">` でラップし、中央揃えで表示する。数式番号は `\tag{番号}` で付与する。

```html
<div class="horizontal-scroll" align="center">[tex: \displaystyle \phi(x)\to\phi^\prime(x)=\phi(x)+\varepsilon\delta_Q\phi(x) \tag{14.5}]</div>
```

**ブロック数式（複数行）:**

`\begin{align}...\end{align}` または `\begin{eqnarray}...\end{eqnarray}` を使用する。

```html
<div class="horizontal-scroll" align="center">[tex: \left.\begin{align}
&e^{(i/2)\omega\cdot J}\phi(0)e^{-(i/2)\omega\cdot J} = \phi(0) \\
&e^{(i/2)\omega\cdot J}\psi^a(0)e^{-(i/2)\omega\cdot J} = {S(\omega)^a}_b\psi^b(0)
\end{align}\right\}\tag{14.15}]</div>
```

**数式記法まとめ:**

| 記法 | 用途 | 例 |
|------|------|-----|
| `[tex: LaTeX式]` | インライン数式 | `[tex: E = mc^2]` |
| `<div class="horizontal-scroll" align="center">[tex: \displaystyle 式]</div>` | ブロック数式（中央揃え） | 上記参照 |
| `\tag{番号}` | 数式番号 | `[tex: E = mc^2 \tag{1.1}]` |
| `\begin{align}...\end{align}` | 複数行数式（揃え） | 上記参照 |
| `\begin{eqnarray}...\end{eqnarray}` | 複数行数式（等号揃え） | 上記参照 |
| `\left.` / `\right\}` | 連立式の括弧 | 上記参照 |

##### その他の記法

| 記法 | 用途 | 例 |
|------|------|-----|
| `[:contents]` | 目次の自動生成 | リード文の直後に配置 |
| `(( 脚注テキスト ))` | 脚注 | `本文(( 補足説明 ))` |
| `====` | 「続きを読む」区切り | 記事の折りたたみ位置に配置 |
| `>< ... ><` | 非表示エリア（下書きメモ等） | コメントアウト的に使用 |

#### 3.3 執筆のガイドライン

- **見出しは `*`（H3）から開始する**（H1はブログタイトル、H2は記事タイトルとしてはてなブログが自動生成するため）
- **リード文**は記事の冒頭に配置し、120〜200文字程度で記事の概要を述べる
- **目次 `[:contents]`** はリード文の直後に配置する
- **1セクション**は300〜800文字程度を目安にする
- **コードブロック**にはスーパーpre記法（`>|言語名| ... ||<`）を使い、必ず言語を指定する
- **数式**を記述する場合は、**はてな記法の `[tex: LaTeX式]`** を使用する
  - インライン数式: 文中に `[tex: \varepsilon]` のように記述する
  - ブロック数式: `<div class="horizontal-scroll" align="center">[tex: \displaystyle 式 \tag{番号}]</div>` の形式で記述する
  - 複数行数式: `\begin{align}...\end{align}` や `\begin{eqnarray}...\end{eqnarray}` を使用する
  - 数式番号は `\tag{番号}` で付与する
  - LaTeXのバックスラッシュはそのまま1つで記述する（エスケープ不要）
  - 詳細な記法例は `examples/quantum-field-theory.txt` を参照すること
- **画像**が必要な場合は `generate_image` ツールで生成し、はてなフォトライフにアップロードして `[f:id:ユーザー名:画像ID:image]` で挿入する。またはHTML `<img>` タグを使用する
- **内部リンク**・**外部リンク**はブログカード（`[URL:embed:cite]`）またはタイトル付きリンク（`[URL:title]`）を活用する
- **箇条書き**は `-項目` 記法を適度に使い、読みやすさを重視する（ハイフンとテキストの間にスペースを入れない）
- **太字** は `<b>テキスト</b>` で記述する（重要なキーワードに使用し、多用しない）
- 記事全体の文字数は **2000〜5000文字** を目安にする（内容に応じて調整）
- **脚注**は `(( 脚注テキスト ))` 記法を使用する

#### 3.4 SEO対策

- タイトルにはメインキーワードを含める（32文字以内推奨）
- リード文にもキーワードを自然に含める
- 見出し（H3、H4）にもキーワードを分散させる
- 適切な内部リンク・外部リンクを含める

### Step 4: レビューと修正

1. 生成した記事をユーザーに提示する
2. フィードバックに基づいて修正する
3. 最終確認を得る

### Step 5: 保存

記事を以下の2箇所に保存する：

#### 5.1 ローカルプロジェクトへの保存

```
c:\Users\user\Dev\blog-post\
├── posts/
│   └── YYYY-MM-DD_slug-title.txt    ← 記事ファイル（はてな記法）
├── drafts/
│   └── YYYY-MM-DD_slug-title.txt    ← 下書き
└── assets/
    └── images/                      ← 生成した画像
```

- **ファイル名**: `YYYY-MM-DD_slug-title.txt`（日付＋英語スラッグ、はてな記法のため `.txt` 拡張子）
- **下書き**: `drafts/` フォルダに保存（`draft: true` のメタデータ付き）
- **公開版**: ユーザーの承認後、`posts/` フォルダに移動
- **画像**: `assets/images/` に保存

#### 5.2 Google Driveへの保存

- Google Drive上の **「ブログ記事」フォルダ** (ID: `1ydDh4Ml7U756ZGnPg9_TdL9njeTdgDtb`) に保存する
- `mcp_gdrive_gdrive_create_file` を使用してGoogle Docsとして作成する
  - `convertTo: "document"` を指定してGoogle Docs形式に変換する
- ファイル名: `[YYYY-MM-DD] 記事タイトル`

---

## テンプレート

テンプレートは `.agent/skills/blog-post/templates/` 配下に格納されています。

### 利用可能なテンプレート

| テンプレート | ファイル | 用途 |
|-------------|---------|------|
| 技術解説記事 | `tech_tutorial.txt` | 技術的なチュートリアルやハウツー記事 |
| レビュー・紹介記事 | `review.txt` | ツール、ライブラリ、サービスの紹介やレビュー |
| 学習メモ記事 | `learning_note.txt` | 学んだことの整理・共有 |

### サンプル記事

サンプル記事は `.agent/skills/blog-post/examples/` 配下に格納されています。

| サンプル | ファイル | 説明 |
|---------|---------|------|
| 技術解説記事 | `sample-tech-post.txt` | Convex × Next.jsの解説記事。基本的なはてな記法の使用例 |
| 数式を含む記事 | `quantum-field-theory.txt` | 場の量子論の解説記事。**数式記法のリファレンス**として参照すること |

---

## 使用例

### 基本的な使い方

```
ユーザー: Google Driveにある「Convex入門」のドキュメントをブログ記事にしたい
```

→ このスキルが以下を実行：
1. Google Driveから「Convex入門」を検索・読込
2. 内容を分析し、アウトラインを提案
3. 適切なテンプレートで記事を生成
4. ユーザーレビュー後、ローカル＋Google Driveに保存

### トピック指定での使い方

```
ユーザー: Google Driveの「プロジェクト設計書.pdf」を元に、設計思想についてのブログ記事を書きたい
```

→ 参照元を読み込んだ上で、指定トピックに絞った記事を生成

---

## 注意事項

- ソースファイルの著作権・機密性に注意すること
- 個人情報や機密情報が含まれる場合はユーザーに確認すること
- 記事内のコードは必ず動作確認済みのものを使用すること
- はてなブログの利用規約に違反する内容は生成しないこと
- **はてな記法モード**で投稿することを前提としている（Markdownモードではない）
